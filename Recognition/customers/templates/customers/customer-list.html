{% extends 'customers/base.html' %}
{% load customers_tags %}


{% block content %}

    <!-- Breadcrumb -->
    <nav style="--bs-breadcrumb-divider: '>';" aria-label="breadcrumb">
        <ol class="breadcrumb">
            <li class="breadcrumb-item"><a href="{% url 'customers:catalog' %}">Root</a></li>
            <li class="breadcrumb-item active" aria-current="page">Customers</li>
        </ol>
    </nav>

    <!-- Page header -->
    <div class="row g-3" style="margin-top: 24px">
        <div class="col-md-6">
            <h3>Customers:</h3>
        </div>
        <div class="col-md-6 d-md-flex justify-content-md-end">
            <a class="btn btn-primary" href="{% url 'customers:customer_create' %}" role="button">Create</a>
        </div>
    </div>

    <!-- Customers table -->
    <table class="table">
        <thead>
        <tr>
            <th scope="col">id</th>
            <th scope="col">Customer</th>
            <th scope="col">Passport</th>
            <th scope="col">Phone number</th>
            <th scope="col">Created</th>
        </tr>
        </thead>
        <tbody>
        {% for customer in customer_list %}
            <tr>
                <th scope="row">{{ customer.id }}</th>
                <td><a href="{% url 'customers:customer_detail' customer.id %}">{{ customer }}</a></td>
                <td><a href="{% url 'customers:passport_detail' customer.passport.id %}">{{ customer }}</a></td>
                <td>{{ customer.phone_number }}</td>
                <td>{{ customer.created_delta }}</td>
            </tr>
        {% endfor %}
        </tbody>
    </table>

    <!-- Paginator -->
    {% if customer_list.paginator.num_pages > 1 %}
        <nav aria-label="Paginator">
            <ul class="pagination">
                <li class="page-item {% if not customer_list.has_previous %} disabled {% endif %}">
                    <a class="page-link" href="{% if customer_list.has_previous %}?{% change_params page=customer_list.previous_page_number %}
                    {% else %}#{% endif %}" tabindex="-1" aria-disabled="true">Previous</a>
                </li>

                {% for page in customer_list.paginator.page_range %}
                    {% if page >= customer_list.number|add:-2 and page <= customer_list.number|add:2 %}
                        <li class="page-item {% if page == customer_list.number %} active {% endif %}" aria-current="page">
                            <a class="page-link" href="?{% change_params page=page %}">{{ page }}</a>
                        </li>
                    {% endif %}
                {% endfor %}

                <li class="page-item {% if not customer_list.has_next %} disabled {% endif %}">
                    <a class="page-link" href="{% if customer_list.has_next %}?{% change_params page=customer_list.next_page_number %}
                    {% else %}#{% endif %} ">Next</a>
                </li>
            </ul>
        </nav>
    {% endif %}

{% endblock %}